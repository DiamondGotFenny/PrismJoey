# 项目需求文档：PrismJoey (七彩阶梯) - 数学学习模块

**版本：** 1.0
**日期：** 2024-05-15
**项目目标：** 为 7 岁女儿 Joey 开发一款互动式教育桌面应用，初期专注于帮助她熟练掌握 100 以内加减法的口算和心算。未来计划扩展至英语、中文阅读、STEM、常识、逻辑等多个学科。
**技术栈：** Electron, React, TypeScript, Vite, p5.js (可选), Anime.js (可选), Azure Speech Services (未来), Open Router (LLM, 未来)

## 1. 用户画像与使用场景

- **主要用户：** Joey (7 岁女孩)，小学低年级学生。
- **次要用户：** 家长 (监控学习进度，辅助使用)。
- **使用场景：**
  - Joey 在家长的指导下或独立使用电脑进行数学练习。
  - 通过有趣的互动和即时反馈，提升学习兴趣和计算能力。
  - 家长可以查看学习报告，了解 Joey 的强项和需要改进的地方。

## 2. 核心功能需求 (MVP - 100 以内加减法模块)

### 2.1. 用户界面 (UI)

- **2.1.1. 主界面/欢迎界面：**
  - 清晰展示产品名称/Logo ("七彩阶梯" / PrismJoey)。
  - 提供 "开始学习" 或选择学习模块的入口。
  - 视觉风格：色彩鲜明、卡通、对儿童友好、符合“彩虹”和“阶梯”的主题。
- **2.1.2. 难度选择界面：**
  - 允许用户选择不同的难度级别进行练习。
  - 难度级别应清晰易懂，例如：
    - "10 以内加减法"
    - "20 以内不进/退位加减法"
    - "20 以内进/退位加减法"
    - "100 以内整十数加减法"
    - "100 以内两位数与一位数加减法 (不进/退位)"
    - "100 以内两位数与一位数加减法 (进/退位)"
    - (更高难度可选) "100 以内两位数与两位数加减法 (不进/退位)"
    - (更高难度可选) "100 以内两位数与两位数加减法 (进/退位)"
  - 每个难度级别可以有视觉上的区分或进度标识。
- **2.1.3. 练习界面：**
  - **题目显示区：**
    - 清晰、大号字体显示数学题目，例如 "25 + 8 = ?" 或 "30 - 12 = ?"。
    - 操作符（+、-、=）和数字应易于辨认。
  - **答案输入区：**
    - 方案一 (优先)：模拟数字键盘 (0-9 按钮, 清除按钮, 确认按钮)。按钮应足够大，易于点击。
    - 方案二 (备选)：标准的 `<input type="number">` 输入框，但可能需要优化样式以适应儿童。
    - 输入时应有视觉反馈。
  - **反馈区：**
    - 答题后立即显示反馈信息。
    - 答对："答对了！🎉"、"真棒！" 等积极反馈，并伴有简单动画 (如星星闪烁、对勾出现)。
    - 答错："再想想哦 🤔"、"不对哦，正确答案是 X" 等鼓励性反馈，并显示正确答案。伴有简单动画 (如题目轻微晃动、叉号出现)。
  - **计分/进度区：**
    - 显示当前得分。
    - 显示当前练习的题目序号 (例如 "第 5/10 题")。
    - (可选) 显示连续答对次数。
  - **控制按钮：**
    - "下一题" 按钮 (在答题并给出反馈后出现/启用)。
    - "返回" 或 "退出练习" 按钮。
    - (可选) "提示" 按钮 (为未来 AI 提示功能预留)。
    - (可选) "读题" 按钮 (为未来 TTS 读题功能预留)。
- **2.1.4. 练习总结/报告界面 (可选 MVP)：**
  - 完成一组练习后，显示本次练习的总结。
  - 包括：总题数、答对题数、答错题数、正确率、用时等。
  - 给予鼓励性评语。

### 2.2. 核心逻辑

- **2.2.1. 题目生成器：**
  - 根据选定的难度级别，随机生成加法或减法题目。
  - 确保减法题目结果不为负数。
  - 算法应能覆盖所选难度的各种情况 (例如，进位、退位、特殊数字组合如含 0、相同数字等)。
  - 题目不应在短期内重复过多。
- **2.2.2. 答案校验：**
  - 获取用户输入的答案。
  - 与预计算的正确答案进行比较。
- **2.2.3. 计分与统计：**
  - 每答对一题，增加相应分数。
  - 记录答对和答错的题目数量。
- **2.2.4. 难度控制：**
  - 用户可以手动选择难度。
  - (未来) 可根据用户表现自动调整难度或推荐练习。

### 2.3. 互动与激励

- **2.3.1. 即时反馈：** 答对/答错的视觉和文字反馈是核心。
- **2.3.2. 动画效果 (Anime.js 或 CSS 动画)：**
  - 题目出现/消失动画。
  - 答案正确/错误的反馈动画。
  - 数字输入或按钮点击的微交互动画。
- **2.3.3. (可选) p5.js 视觉元素：**
  - 用 p5.js 创建更生动的背景、粒子效果或庆祝动画。
  - 例如，答对一定数量题目后，出现彩虹或星星雨。
- **2.3.4. (可选) 声音反馈：**
  - 答对/答错的提示音 (需要儿童友好且不刺耳的音效)。
  - 按钮点击音效。
  - 提供静音选项。

## 3. 非功能性需求

- **3.1. 性能：** 应用启动迅速，界面响应流畅，无明显卡顿。
- **3.2. 易用性：** 界面直观，操作简单，符合儿童的使用习惯，无需复杂学习即可上手。
- **3.3. 稳定性：** 应用运行稳定，不易崩溃。
- **3.4. 视觉吸引力：** 色彩搭配和谐，图形元素可爱，能吸引儿童注意力。
- **3.5. 离线使用：** 核心数学练习功能应能离线使用。
- **3.6. 平台：** Electron 应用，主要目标平台为 Windows (后续可考虑 macOS)。

## 4. 未来扩展性考虑 (非 MVP 范围，但设计时应有所考虑)

- **4.1. AI 辅助功能：**
  - **语音输入 (Azure STT)：** 允许 Joey 用语音回答问题。
  - **语音朗读 (Azure TTS)：** 朗读题目、反馈和提示。
  - **智能提示 (Open Router LLM)：** 当 Joey 答错或遇到困难时，提供启发式提示而非直接给出答案。
  - **个性化学习路径：** 根据 Joey 的学习情况动态调整题目难度和内容。
- **4.2. 多学科支持：** 架构设计应便于未来添加英语、中文阅读、STEM 等模块。
- **4.3. 用户账户与进度保存：**
  - (可选) 简单的本地用户配置文件，保存学习进度、设置偏好。
  - (未来) 云端同步。
- **4.4. 家长端功能：** 查看详细学习报告、设置学习目标等。
- **4.5. 更多游戏化元素：** 徽章、排行榜、虚拟奖励、自定义角色/主题等。
- **4.6. 错题本功能：** 自动收集错题，供针对性复习。

## 5. 技术选型与实现说明

- **前端框架：** React (使用 Hooks 和函数式组件)。
- **语言：** TypeScript。
- **构建工具：** Vite。
- **桌面应用框架：** Electron。
  - 主进程 (`electron/main.ts`)：负责窗口管理、IPC 通信、未来 AI 服务调用等 Node.js 相关任务。
  - 预加载脚本 (`electron/preload.ts`)：安全地桥接主进程和渲染进程。
  - 渲染进程 (`src/`): React 应用，负责 UI 和前端逻辑。
- **状态管理：** 初期可使用 React Context API 或 Zustand/Jotai 等轻量级方案。如果应用复杂度显著增加，可考虑 Redux Toolkit。
- **动画库：** Anime.js 或 CSS 动画。
- **交互图形 (可选)：** p5.js。
- **代码规范与格式化：** ESLint, Prettier。
- **版本控制：** Git。

## 6. MVP 交付标准

- 用户可以启动应用。
- 用户可以选择至少 3 个不同难度的 100 以内加减法进行练习。
- 题目能正确生成并显示。
- 用户可以通过模拟数字键盘输入答案。
- 系统能正确判断答案并给出即时、友好的图文反馈和简单动画。
- 系统能进行基本的计分。
- 应用界面美观、操作流畅。

## 7. 待定与讨论点

- 最终产品名称和 Logo 设计。
- 模拟数字键盘的具体样式和交互细节。
- 声音反馈的音效选择和实现。
- p5.js 的具体应用场景和必要性评估。
- 错误处理和边界情况的详细设计。

---

**文档维护者：** Diamond Huang
**最后更新：** 2025-05-14
